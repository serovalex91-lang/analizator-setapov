# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –£–ª—É—á—à–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞

## –ü—Ä–æ–±–ª–µ–º–∞

–í–∞—à —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç **–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—ã–ª–µ—Ç–∞–ª** –∏–∑ Telegram. –ê–∫–∫–∞—É–Ω—Ç –æ—Ç–∫–ª—é—á–∞–ª—Å—è, –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é.

---

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **–ó–∞—â–∏—Ç–∞ –æ—Ç –≤—ã–ª–µ—Ç–æ–≤ –∏ —Ä–∞–∑—Ä—ã–≤–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**

**–ë—ã–ª–æ:**
- –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (5 –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- –ü—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–≤—è–∑–∏ –±–æ—Ç –∫—Ä—ç—à–∏–ª—Å—è
- –ù–µ –±—ã–ª–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–°—Ç–∞–ª–æ:**
- –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å **5 –¥–æ 10**
- –£–≤–µ–ª–∏—á–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ —Å **1 –¥–æ 5 —Å–µ–∫—É–Ω–¥**
- –£–≤–µ–ª–∏—á–µ–Ω —Ç–∞–π–º–∞—É—Ç –æ–ø–µ—Ä–∞—Ü–∏–π —Å **10 –¥–æ 30 —Å–µ–∫—É–Ω–¥**
- –í–∫–ª—é—á–µ–Ω–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–∏ –æ–±—Ä—ã–≤–µ —Å–≤—è–∑–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç –Ω–µ –≤—ã–ª–µ—Ç–∞–µ—Ç –ø—Ä–∏ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º.

---

### 2. **–ó–∞—â–∏—Ç–∞ –æ—Ç FloodWaitError (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞ —Ñ–ª—É–¥)**

**–ë—ã–ª–æ:**
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ Telegram –±–æ—Ç –∫—Ä—ç—à–∏–ª—Å—è
- FloodWait –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –¥–æ 60 —Å–µ–∫—É–Ω–¥
- –ù—É–∂–Ω–æ –±—ã–ª–æ –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞

**–°—Ç–∞–ª–æ:**
- –ë–æ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∂–¥—ë—Ç –¥–æ 12 —á–∞—Å–æ–≤** –ø—Ä–∏ FloodWaitError
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ FloodWait –≤–æ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö
- –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –æ–∂–∏–¥–∞–Ω–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Telegram –±–æ–ª—å—à–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –±–æ—Ç–∞. –ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç - –±–æ—Ç —Å–∞–º –∂–¥—ë—Ç –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

---

### 3. **Rate Limiter (–æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤)**

**–ë—ã–ª–æ:**
- –ë–æ—Ç –º–æ–≥ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ
- Telegram –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –∑–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤

**–°—Ç–∞–ª–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω **RateLimiter –∫–ª–∞—Å—Å**
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: **–º–∞–∫—Å–∏–º—É–º 30 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É**
- –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∂–¥—ë—Ç, –µ—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç —Å–∞–º –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —á–∞—Å—Ç–æ—Ç—É –æ–ø–µ—Ä–∞—Ü–∏–π, –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç—ã Telegram.

---

### 4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

**–ë—ã–ª–æ:**
- –ü—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ –±–æ—Ç –∫—Ä—ç—à–∏–ª—Å—è
- –ù–µ –±—ã–ª–æ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–°—Ç–∞–ª–æ:**
- –í—Å–µ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è **try/except –±–ª–æ–∫–∞–º–∏**
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å **traceback**
- –ë–æ—Ç **–Ω–µ –∫—Ä—ç—à–∏—Ç—Å—è** - –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–¥–Ω–∞ –æ—à–∏–±–∫–∞ –Ω–µ —Ä–æ–Ω—è–µ—Ç –≤–µ—Å—å –±–æ—Ç.

---

### 5. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã**

**–ë—ã–ª–æ:**
- –ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ (Ctrl+C) –±–æ—Ç –º–æ–≥ –Ω–µ –∑–∞–∫—Ä—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –û—Å—Ç–∞–≤–∞–ª–∏—Å—å "–∑–∞–≤–∏—Å—à–∏–µ" —Å–µ—Å—Å–∏–∏ –≤ Telegram

**–°—Ç–∞–ª–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω **try/finally –±–ª–æ–∫** –≤ main()
- –ë–æ—Ç **–≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è** –æ—Ç Telegram
- Graceful shutdown —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–æ—Ç–∞ –Ω–µ –æ—Å—Ç–∞—ë—Ç—Å—è "–º—É—Å–æ—Ä–∞" –≤ –≤–∏–¥–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–µ—Å—Å–∏–π.

---

### 6. **–ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π**

**–ë—ã–ª–æ:**
- –ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Å–æ–æ–±—â–µ–Ω–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –±–µ–∑ –ø–∞—É–∑
- Telegram —Å—á–∏—Ç–∞–ª —ç—Ç–æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º

**–°—Ç–∞–ª–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ **–∑–∞–¥–µ—Ä–∂–∫–∞ 300–º—Å** –º–µ–∂–¥—É –æ–±—Ä–∞–±–æ—Ç–∫–∞–º–∏
- –¢–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–Ω–µ –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ "—á–µ–ª–æ–≤–µ–∫", –∞ –Ω–µ –∫–∞–∫ —Å–ø–∞–º-–±–æ—Ç.

---

### 7. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ**

**–ë—ã–ª–æ:**
- –ë–æ—Ç –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ –∞–∫–∫–∞—É–Ω—Ç

**–°—Ç–∞–ª–æ:**
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç** —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ @SpamBot
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ –∞–∫–∫–∞—É–Ω—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—ã —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç–µ, –µ—Å–ª–∏ —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º –ø—Ä–æ–±–ª–µ–º—ã.

---

### 8. **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –≤—ã–≤–æ–¥ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ**

**–ë—ã–ª–æ:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö

**–°—Ç–∞–ª–æ:**
- –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - –¢–∞–π–º–∞—É—Ç—ã
  - –õ–∏–º–∏—Ç—ã FloodWait
  - Rate limits
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ (–∏–º—è, ID, —Ç–µ–ª–µ—Ñ–æ–Ω)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç –∏ —Å –∫–∞–∫–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º.

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `userbot.py` (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞)

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **–ò–º–ø–æ—Ä—Ç—ã:**
```python
from telethon.errors import FloodWaitError, SessionPasswordNeededError
from datetime import datetime, timedelta
from collections import deque
import traceback
```

2. **RateLimiter –∫–ª–∞—Å—Å** (—Å—Ç—Ä–æ–∫–∏ 170-209)
3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è notify()** (—Å—Ç—Ä–æ–∫–∏ 1461-1494)
4. **–§—É–Ω–∫—Ü–∏—è check_account_status()** (—Å—Ç—Ä–æ–∫–∏ 2287-2304)
5. **–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è main()** (—Å—Ç—Ä–æ–∫–∏ 2307-2387)

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã TelegramClient:
```python
client = TelegramClient(
    'userbot_session', api_id, api_hash,
    connection_retries=10,      # ‚Üë —Å 5 –¥–æ 10
    retry_delay=5,              # ‚Üë —Å 1 –¥–æ 5 —Å–µ–∫
    auto_reconnect=True,
    timeout=30,                 # ‚Üë —Å 10 –¥–æ 30 —Å–µ–∫
    request_retries=5,
)
client.flood_sleep_threshold = 12 * 60 * 60  # 12 —á–∞—Å–æ–≤
```

---

## –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞ (–ø—Ä–æ—Å—Ç–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª**

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å –±–æ—Ç–æ–º:**
```bash
cd /Users/ivan/Downloads/trading_bot_github
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
```bash
PYTHONPATH="venv/lib/python3.11/site-packages" python3 userbot.py
```

4. **–ï—Å–ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–æ–¥:**
   - –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ SMS –∏–ª–∏ Telegram
   - –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤–≤–æ–¥–∞ —Å–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è
   - –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –∫–æ–¥ –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è

5. **–ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ:**
```
ü§ñ Telegram Userbot –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...
üì± –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram...
‚öôÔ∏è  –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - connection_retries: 10
   - retry_delay: 5s
   - timeout: 30s
   - flood_sleep_threshold: 12h
   - rate_limit: 30 —Å–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!
üë§ –ê–∫–∫–∞—É–Ω—Ç: Aleksey (ID: ...)
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–∫–∫–∞—É–Ω—Ç–∞...
‚úÖ –ê–∫–∫–∞—É–Ω—Ç –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
üëÇ –°–ª—É—à–∞–µ–º –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è...
```

6. **–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!** –û—Å—Ç–∞–≤—å—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—ã–º.

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ screen –∏–ª–∏ tmux:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å screen (–µ—Å–ª–∏ –Ω–µ—Ç)
brew install screen

# –ó–∞–ø—É—Å—Ç–∏—Ç—å screen —Å–µ—Å—Å–∏—é
screen -S trading_bot

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
cd /Users/ivan/Downloads/trading_bot_github
PYTHONPATH="venv/lib/python3.11/site-packages" python3 userbot.py

# –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è –æ—Ç —Å–µ—Å—Å–∏–∏ (–±–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å)
# –ù–∞–∂–º–∏—Ç–µ: Ctrl+A, –∑–∞—Ç–µ–º D

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ
screen -r trading_bot
```

2. **–ò–ª–∏ —á–µ—Ä–µ–∑ nohup:**
```bash
cd /Users/ivan/Downloads/trading_bot_github
nohup PYTHONPATH="venv/lib/python3.11/site-packages" python3 userbot.py > bot.log 2>&1 &

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -f bot.log
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd (Linux) –∏–ª–∏ launchd (macOS)

–î–ª—è macOS —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `~/Library/LaunchAgents/com.trading.bot.plist`:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.trading.bot</string>
    <key>ProgramArguments</key>
    <array>
        <string>/opt/homebrew/bin/python3</string>
        <string>/Users/ivan/Downloads/trading_bot_github/userbot.py</string>
    </array>
    <key>EnvironmentVariables</key>
    <dict>
        <key>PYTHONPATH</key>
        <string>/Users/ivan/Downloads/trading_bot_github/venv/lib/python3.11/site-packages</string>
    </dict>
    <key>RunAtLoad</key>
    <true/>
    <key>KeepAlive</key>
    <true/>
    <key>StandardOutPath</key>
    <string>/Users/ivan/Downloads/trading_bot_github/bot.log</string>
    <key>StandardErrorPath</key>
    <string>/Users/ivan/Downloads/trading_bot_github/bot.error.log</string>
</dict>
</plist>
```

–ó–∞—Ç–µ–º:
```bash
launchctl load ~/Library/LaunchAgents/com.trading.bot.plist
```

---

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª
- –ù–∞–∂–º–∏—Ç–µ **Ctrl+C** –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –±–æ—Ç
- –í—ã —É–≤–∏–¥–∏—Ç–µ:
```
üõë –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (Ctrl+C)...
üîå –û—Ç–∫–ª—é—á–∞–µ–º—Å—è –æ—Ç Telegram...
‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
üëã Userbot –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ kill
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep userbot.py

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–∑–∞–º–µ–Ω–∏—Ç–µ PID –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π)
kill <PID>
```

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤:
- `messages.log` - –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `messages.csv` - CSV —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- `raw_messages.log` - —Å—ã—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
- `webhook_history.csv` - –∏—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
tail -f messages.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
tail -100 messages.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR\|–û—à–∏–±–∫–∞" messages.log
```

---

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. "ModuleNotFoundError: No module named 'telethon'"
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—É—é –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞ —Å PYTHONPATH:
```bash
PYTHONPATH="venv/lib/python3.11/site-packages" python3 userbot.py
```

### 2. "Please enter the code you received:" –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–≤–æ–¥
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ.

### 3. FloodWaitError –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤
**–†–µ—à–µ–Ω–∏–µ:** –ë–æ—Ç —Å–∞–º –ø–æ–¥–æ–∂–¥—ë—Ç. –ù–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

### 4. –í—ã–∫–∏–¥—ã–≤–∞–µ—Ç –∏–∑ –º–æ–±–∏–ª—å–Ω–æ–≥–æ Telegram
**–ü—Ä–∏—á–∏–Ω–∞:** Telegram –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π.
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ—Å—Ç–æ –≤–æ–π–¥–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ. –û–±–µ —Å–µ—Å—Å–∏–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

### 5. "Session file is locked"
**–ü—Ä–∏—á–∏–Ω–∞:** –î–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω—É —Å–µ—Å—Å–∏—é.
**–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:
```bash
pkill -f userbot.py
rm userbot_session.session-journal
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞** –Ω–∞ –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏
2. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞** —á–µ—Ä–µ–∑ @SpamBot —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
4. **–î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã** —Ñ–∞–π–ª–∞ `userbot_session.session`
5. **–ù–µ –ø—Ä–µ–≤—ã—à–∞–π—Ç–µ** 30 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É –≤—Ä—É—á–Ω—É—é

---

## –ò—Ç–æ–≥

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:
‚ùå –ë–æ—Ç –≤—ã–ª–µ—Ç–∞–ª –∫–∞–∂–¥—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤
‚ùå FloodWaitError –∫—Ä—ç—à–∏–ª –±–æ—Ç–∞
‚ùå –ù—É–∂–Ω–æ –±—ã–ª–æ –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å
‚ùå –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏—á–∏–Ω–∞—Ö –ø–∞–¥–µ–Ω–∏—è

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:
‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ 24/7
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ FloodWait
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
‚úÖ Graceful shutdown
‚úÖ Rate limiting
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–∫–∫–∞—É–Ω—Ç–∞

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 23 –æ–∫—Ç—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è:** 2.0 (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è)
